<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head>
<h1>Instrumentation Results for qr_cordic_opt_mex</h1>
<h2>Summary</h2>
<p>To re-create this report:</p>
<pre>  showInstrumentationResults qr_cordic_opt_mex -proposeFL -defaultDT numerictype(1,12,6)</pre>

<p>MEX-function name:</p>
<pre>qr_cordic_opt_mex</pre>
<p>Timestamp:</p>
<pre>Thu May 11 20:40:54 2023</pre>
<p>To open this report from the MATLAB command line:</p>
<pre> web('-browser','C:\Users\User\Desktop\VLSI_DSP_Notes_HW_Project\hw5\instrumentation\qr_cordic_opt_mex\html\printable.html')</pre>


<h2>Function qr_cordic_opt </h2>

<pre>
function [Q, R] = qr_cordic_opt(M,T,S)
    % Algorithm from VLSI DSP lecture notes, 5-54, modify it using CORDIC algorithm
    N = length(M);
    % Augmenting the matrix I to the left, updating I alongside with A when performing rotation
    Q = eye(N);


    tmp1 = 0;
    tmp2 = 0;

    % Turning into fixed point
    M        = cast(M, 'like',T.x_output);
    Q        = cast(Q,'like' ,S.x_output);

    tmp1 = cast(tmp1,'like',T.x_partial);
    tmp2 = cast(tmp2,'like',T.y_partial);

    iters_num = 12;
    for k = 1:N

        for i = N:-1:k + 1
            % This needed to be replaced with cordic, vectoring mode.
            % Use vector mode to calculate of givens rotation

            d = cordic_vector_mode_opt(M(i-1, k), M(i, k), iters_num,T);
            % fprintf('Vector Mode:\n theta = %f , i = %d  \n',theta,i);

            for j = k:N
                % For R
                % This needed to be replaced with cordic, rotation mode


                [tmp1, tmp2] = cordic_rotation_mode_opt(M(i-1,j), M( i,j ), d, iters_num,T);
                % fprintf('Rotation Mode:\n x = %f , y = %f , j = %d  \n',tmp1,tmp2,j);

                M(i - 1, j) = tmp1;
                M(i, j) = tmp2;
            end

            for j = 1:N
                % For Q, after calculation, take its transpose to get the correct Q, same for this portion.
                [tmp1, tmp2] = cordic_rotation_mode_opt( Q(i-1,j), Q(i,j), d, iters_num,S);

                Q(i-1, j) = tmp1;
                Q(i, j) = tmp2;
            end

        end

    end
    R = M;
    Q = Q';
end
</pre>
<table style="border-collapse: collapse; border: solid;" border="1">
<caption><b>Logged Variables for qr_cordic_opt</b></caption>
<tr><th>Variable</th><th>Type</th><th>Size</th><th>Class</th><th>Complex</th><th>Signedness</th><th>WL</th><th>FL</th><th>Proposed<br>Signedness</th><th>Proposed<br>WL</th><th>Proposed<br>FL</th><th>Percent of<br>Current Range</th><th>Always<br>Whole Number</th><th>SimMin</th><th>SimMax</th></tr>
<tr><td><code>M&gt;1</code></td><td><code>Input</code></td><td><code>4&nbsp;x&nbsp;4</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>8</code></td><td><code>0</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code><span style="background-color: yellow"><span style="color: black"><b>100</b></span></span></code></td><td><code><b>Yes</b></code></td><td><code>-128</code></td><td><code>127</code></td></tr>
<tr><td><code>M&gt;2</code></td><td><code>Local</code></td><td><code>4&nbsp;x&nbsp;4</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>89</code></td><td><code>No</code></td><td><code>-221.375</code></td><td><code>225.625</code></td></tr>
<tr><td><code>N</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>4</code></td><td><code>4</code></td></tr>
<tr><td><code>Q&gt;1</code></td><td><code>Local</code></td><td><code>4&nbsp;x&nbsp;4</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>1</code></td></tr>
<tr><td><code>Q&gt;2</code></td><td><code>Output</code></td><td><code>4&nbsp;x&nbsp;4</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>51</code></td><td><code>No</code></td><td><code>-1</code></td><td><code>1</code></td></tr>
<tr><td><code>R</code></td><td><code>Output</code></td><td><code>4&nbsp;x&nbsp;4</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>89</code></td><td><code>No</code></td><td><code>-221.375</code></td><td><code>225.625</code></td></tr>
<tr><td><code>d</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;12</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>1</code></td></tr>
<tr><td><code>i</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>2</code></td><td><code>4</code></td></tr>
<tr><td><code>iters_num</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>12</code></td><td><code>12</code></td></tr>
<tr><td><code>j</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>1</code></td><td><code>4</code></td></tr>
<tr><td><code>k</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>1</code></td><td><code>4</code></td></tr>
<tr><td><code>tmp1&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>0</code></td></tr>
<tr><td><code>tmp1&gt;2</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>0</code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>0</code></td></tr>
<tr><td><code>tmp1&gt;3</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>89</code></td><td><code>No</code></td><td><code>-221.375</code></td><td><code>225.625</code></td></tr>
<tr><td><code>tmp1&gt;4</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>50</code></td><td><code>No</code></td><td><code>-1</code></td><td><code>0.9990234375</code></td></tr>
<tr><td><code>tmp2&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>0</code></td></tr>
<tr><td><code>tmp2&gt;2</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>0</code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>0</code></td></tr>
<tr><td><code>tmp2&gt;3</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>76</code></td><td><code>No</code></td><td><code>-187.375</code></td><td><code>192.375</code></td></tr>
<tr><td><code>tmp2&gt;4</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>51</code></td><td><code>No</code></td><td><code>-1</code></td><td><code>1</code></td></tr>
</table>

<h2>Function cordic_vector_mode_opt </h2>

<pre>
function d = cordic_vector_mode_opt(x, y, iters_num,T)
    % Vectoring mode
    % Description: Vectoring mode uses linear rotation s.t. y approach to 0 iteratively
    % Input:  vector (x,y) rotates it with the angle z
    % Output: Value after rotation (x,y) also the angle of tan(y/x)
    % Goal is trying to nullify y accumulating the angle when rotating.

    K = 0.60725334371201;
    % Turning into fixed point
    % The partial result during calculation
    x = cast(x,'like',T.x_partial);
    y = cast(y,'like',T.y_partial);
    x_new     = cast(x, 'like', T.x_partial);

    % The result of each stage.
    d        = zeros(1,iters_num);

    for i = 1:iters_num
        % Z is the current angle, and also the angle I want to shift toward to.
        if sign(x * y) > 0
            % Since it is at the first dimension, we shoudl shift in a clockwise manner.
            % Since we are trying to obtain the angle, we must first add when we are rotating.
            x_new(:) = x + bitsra(y, i - 1);
            y(:)     = y - bitsra(x, i - 1);
            x(:) = x_new;
            d(i) = 0;
        else
            % Otherwise shift in a CounterClockwise(CC) manner
            x_new(:) = x - bitsra(y, i - 1);
            y(:) = y + bitsra(x, i - 1);
            x(:) = x_new;
            d(i) = 1;
        end

    end

    x_result = x;
    y_result = y;
end
</pre>
<table style="border-collapse: collapse; border: solid;" border="1">
<caption><b>Logged Variables for cordic_vector_mode_opt</b></caption>
<tr><th>Variable</th><th>Type</th><th>Size</th><th>Class</th><th>Complex</th><th>Signedness</th><th>WL</th><th>FL</th><th>Proposed<br>Signedness</th><th>Proposed<br>WL</th><th>Proposed<br>FL</th><th>Percent of<br>Current Range</th><th>Always<br>Whole Number</th><th>SimMin</th><th>SimMax</th></tr>
<tr><td><code>K</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>11</code></td><td><code></code></td><td><code>No</code></td><td><code>0.60725334371201</code></td><td><code>0.60725334371201</code></td></tr>
<tr><td><code>d</code></td><td><code>Output</code></td><td><code>1&nbsp;x&nbsp;12</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>1</code></td></tr>
<tr><td><code>i</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>1</code></td><td><code>12</code></td></tr>
<tr><td><code>iters_num</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>12</code></td><td><code>12</code></td></tr>
<tr><td><code>x&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>73</code></td><td><code>No</code></td><td><code>-364.9755859375</code></td><td><code>372.1875</code></td></tr>
<tr><td><code>x&gt;2</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>76</code></td><td><code>No</code></td><td><code>-183</code></td><td><code>192.375</code></td></tr>
<tr><td><code>x_new</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>73</code></td><td><code>No</code></td><td><code>-364.9755859375</code></td><td><code>372.1875</code></td></tr>
<tr><td><code>x_result</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>73</code></td><td><code>No</code></td><td><code>-364.9755859375</code></td><td><code>372.1875</code></td></tr>
<tr><td><code>y&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>42</code></td><td><code>No</code></td><td><code>-215</code></td><td><code>202.625</code></td></tr>
<tr><td><code>y&gt;2</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>84</code></td><td><code>No</code></td><td><code>-215</code></td><td><code>202.625</code></td></tr>
<tr><td><code>y_result</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>< 1</code></td><td><code>No</code></td><td><code>-0.162109375</code></td><td><code>0.1748046875</code></td></tr>
</table>

<h2>Function cordic_rotation_mode_opt&gt;1 </h2>

<pre>
function [x_result, y_result] = cordic_rotation_mode_opt(x, y, d, iters_num, T)
    % Rotation mode
    % Description: Rotation mode using Linear rotation and multiplied by a constant K = 0.607252935 for stretching
    % Input:  vector (x,y) rotates it with the angle z
    % Output: vector (xcos(z),ysin(z))
    % Enables shift add multiply instead of calculation trigonemetric function
    % tan(a^i) = 2^(-i), thus tan(a^i) is simply shift.
    % Try to approach the desirable angle, we multiply the cos(a^i) only after the complete rotation.
    % Simply multiply K = 0.607252935 after the rotations. See if the angle difference approach to zero.

    K = 0.60725334371201; % This is Products of K_12

    % Turning into fixed point
    % The partial result during calculation
    x = cast(x,'like',T.x_partial);
    y = cast(y,'like',T.y_partial);
    K        = cast(K, 'like', T.x_partial);
    x_new     = cast(x, 'like', T.x_partial);

    % The result of each stage.
    x_result = cast(x, 'like', T.x_output);
    y_result = cast(y, 'like', T.y_output);

    for i = 1:iters_num
            % Z is the current angle, and also the angle I want to shift toward to.
            if d(i) == 0
                % If angle is above 0, I would like to rotate in a clockwise manner
                x_new(:) = x + bitsra(y, i - 1);
                y(:) = y - bitsra(x, i - 1);
                x(:) = x_new;
            else
                % Otherwise, rotate counter clockwise.
                x_new(:) = x - bitsra(y, i - 1);
                y(:) = y + bitsra(x, i - 1);
                x(:) = x_new;
            end

    end

    % Output xn, yn
    x_result(:) = x * K;
    y_result(:) = y * K;
end
</pre>
<table style="border-collapse: collapse; border: solid;" border="1">
<caption><b>Logged Variables for cordic_rotation_mode_opt&gt;1</b></caption>
<tr><th>Variable</th><th>Type</th><th>Size</th><th>Class</th><th>Complex</th><th>Signedness</th><th>WL</th><th>FL</th><th>Proposed<br>Signedness</th><th>Proposed<br>WL</th><th>Proposed<br>FL</th><th>Percent of<br>Current Range</th><th>Always<br>Whole Number</th><th>SimMin</th><th>SimMax</th></tr>
<tr><td><code>K&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>11</code></td><td><code></code></td><td><code>No</code></td><td><code>0.60725334371201</code></td><td><code>0.60725334371201</code></td></tr>
<tr><td><code>K&gt;2</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>< 1</code></td><td><code>No</code></td><td><code>0.6064453125</code></td><td><code>0.6064453125</code></td></tr>
<tr><td><code>d</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;12</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>1</code></td></tr>
<tr><td><code>i</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>1</code></td><td><code>12</code></td></tr>
<tr><td><code>iters_num</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>12</code></td><td><code>12</code></td></tr>
<tr><td><code>x&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>73</code></td><td><code>No</code></td><td><code>-364.9755859375</code></td><td><code>372.1875</code></td></tr>
<tr><td><code>x&gt;2</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>76</code></td><td><code>No</code></td><td><code>-185</code></td><td><code>192.375</code></td></tr>
<tr><td><code>x_new</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>73</code></td><td><code>No</code></td><td><code>-364.9755859375</code></td><td><code>372.1875</code></td></tr>
<tr><td><code>x_result</code></td><td><code>Output</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>89</code></td><td><code>No</code></td><td><code>-221.375</code></td><td><code>225.625</code></td></tr>
<tr><td><code>y&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>20</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>63</code></td><td><code>No</code></td><td><code>-314.806640625</code></td><td><code>318.91796875</code></td></tr>
<tr><td><code>y&gt;2</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>84</code></td><td><code>No</code></td><td><code>-215</code></td><td><code>202.625</code></td></tr>
<tr><td><code>y_result</code></td><td><code>Output</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>3</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>84</code></td><td><code>No</code></td><td><code>-215</code></td><td><code>202.625</code></td></tr>
</table>

<h2>Function cordic_rotation_mode_opt&gt;2 </h2>

<pre>
function [x_result, y_result] = cordic_rotation_mode_opt(x, y, d, iters_num, T)
    % Rotation mode
    % Description: Rotation mode using Linear rotation and multiplied by a constant K = 0.607252935 for stretching
    % Input:  vector (x,y) rotates it with the angle z
    % Output: vector (xcos(z),ysin(z))
    % Enables shift add multiply instead of calculation trigonemetric function
    % tan(a^i) = 2^(-i), thus tan(a^i) is simply shift.
    % Try to approach the desirable angle, we multiply the cos(a^i) only after the complete rotation.
    % Simply multiply K = 0.607252935 after the rotations. See if the angle difference approach to zero.

    K = 0.60725334371201; % This is Products of K_12

    % Turning into fixed point
    % The partial result during calculation
    x = cast(x,'like',T.x_partial);
    y = cast(y,'like',T.y_partial);
    K        = cast(K, 'like', T.x_partial);
    x_new     = cast(x, 'like', T.x_partial);

    % The result of each stage.
    x_result = cast(x, 'like', T.x_output);
    y_result = cast(y, 'like', T.y_output);

    for i = 1:iters_num
            % Z is the current angle, and also the angle I want to shift toward to.
            if d(i) == 0
                % If angle is above 0, I would like to rotate in a clockwise manner
                x_new(:) = x + bitsra(y, i - 1);
                y(:) = y - bitsra(x, i - 1);
                x(:) = x_new;
            else
                % Otherwise, rotate counter clockwise.
                x_new(:) = x - bitsra(y, i - 1);
                y(:) = y + bitsra(x, i - 1);
                x(:) = x_new;
            end

    end

    % Output xn, yn
    x_result(:) = x * K;
    y_result(:) = y * K;
end
</pre>
<table style="border-collapse: collapse; border: solid;" border="1">
<caption><b>Logged Variables for cordic_rotation_mode_opt&gt;2</b></caption>
<tr><th>Variable</th><th>Type</th><th>Size</th><th>Class</th><th>Complex</th><th>Signedness</th><th>WL</th><th>FL</th><th>Proposed<br>Signedness</th><th>Proposed<br>WL</th><th>Proposed<br>FL</th><th>Percent of<br>Current Range</th><th>Always<br>Whole Number</th><th>SimMin</th><th>SimMax</th></tr>
<tr><td><code>K&gt;1</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>11</code></td><td><code></code></td><td><code>No</code></td><td><code>0.60725334371201</code></td><td><code>0.60725334371201</code></td></tr>
<tr><td><code>K&gt;2</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>31</code></td><td><code>No</code></td><td><code>0.6064453125</code></td><td><code>0.6064453125</code></td></tr>
<tr><td><code>d</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;12</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>0</code></td><td><code>1</code></td></tr>
<tr><td><code>i</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>1</code></td><td><code>12</code></td></tr>
<tr><td><code>iters_num</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>double</code></td><td><code>No</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>0</code></td><td><code></code></td><td><code><b>Yes</b></code></td><td><code>12</code></td><td><code>12</code></td></tr>
<tr><td><code>x</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>83</code></td><td><code>No</code></td><td><code>-1.6474609375</code></td><td><code>1.6474609375</code></td></tr>
<tr><td><code>x_new</code></td><td><code>Local</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>83</code></td><td><code>No</code></td><td><code>-1.6474609375</code></td><td><code>1.6474609375</code></td></tr>
<tr><td><code>x_result</code></td><td><code>Output</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>51</code></td><td><code>No</code></td><td><code>-1</code></td><td><code>1</code></td></tr>
<tr><td><code>y</code></td><td><code>Input</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>83</code></td><td><code>No</code></td><td><code>-1.6474609375</code></td><td><code>1.650390625</code></td></tr>
<tr><td><code>y_result</code></td><td><code>Output</code></td><td><code>1&nbsp;x&nbsp;1</code></td><td><code>embedded.fi</code></td><td><code>No</code></td><td><code>Signed</code></td><td><code>12</code></td><td><code>10</code></td><td><code></code></td><td><code></code></td><td><code></code></td><td><code>51</code></td><td><code>No</code></td><td><code>-1</code></td><td><code>1</code></td></tr>
</table>
</html>
